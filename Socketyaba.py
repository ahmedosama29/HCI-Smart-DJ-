import mediapipe as mp
import cv2
from dollarpy import Recognizer, Template, Point
import numpy as np
import os
import time
import socket
import threading
mp_pose = mp.solutions.pose
pose = mp_pose.Pose(min_detection_confidence=0.5 , min_tracking_confidence=0.5)
mp_drawing = mp.solutions.drawing_utils

from dollarpy import Recognizer, Template, Point
Down = Template('Down' , [
Point(177, 210, 1),
Point(185, 226, 1),
Point(161, 250, 1),
Point(166, 213, 1),
Point(177, 210, 1),
Point(184, 226, 1),
Point(161, 250, 1),
Point(165, 213, 1),
Point(176, 210, 1),
Point(183, 227, 1),
Point(161, 250, 1),
Point(164, 214, 1),
Point(176, 212, 1),
Point(183, 229, 1),
Point(161, 252, 1),
Point(163, 216, 1),
Point(175, 213, 1),
Point(182, 230, 1),
Point(161, 253, 1),
Point(162, 217, 1),
Point(175, 215, 1),
Point(182, 232, 1),
Point(161, 255, 1),
Point(162, 219, 1),
Point(175, 217, 1),
Point(181, 234, 1),
Point(161, 256, 1),
Point(162, 221, 1),
Point(175, 219, 1),
Point(181, 235, 1),
Point(161, 258, 1),
Point(162, 222, 1),
Point(175, 223, 1),
Point(181, 238, 1),
Point(161, 261, 1),
Point(163, 225, 1),
Point(175, 226, 1),
Point(182, 240, 1),
Point(161, 263, 1),
Point(163, 228, 1),
Point(175, 227, 1),
Point(182, 241, 1),
Point(161, 264, 1),
Point(164, 229, 1),
Point(175, 228, 1),
Point(182, 242, 1),
Point(161, 266, 1),
Point(164, 230, 1),
Point(175, 231, 1),
Point(182, 244, 1),
Point(161, 270, 1),
Point(164, 233, 1),
Point(175, 235, 1),
Point(181, 248, 1),
Point(160, 274, 1),
Point(163, 237, 1),
Point(175, 240, 1),
Point(181, 252, 1),
Point(159, 278, 1),
Point(162, 243, 1),
Point(173, 243, 1),
Point(178, 254, 1),
Point(156, 281, 1),
Point(160, 247, 1),
Point(172, 243, 1),
Point(176, 255, 1),
Point(154, 282, 1),
Point(158, 247, 1),
Point(169, 245, 1),
Point(174, 256, 1),
Point(152, 284, 1),
Point(156, 250, 1),
Point(167, 247, 1),
Point(172, 258, 1),
Point(150, 286, 1),
Point(154, 253, 1),
Point(167, 247, 1),
Point(171, 258, 1),
Point(150, 286, 1),
Point(154, 253, 1),
Point(166, 249, 1),
Point(170, 259, 1),
Point(148, 287, 1),
Point(153, 255, 1),
Point(165, 250, 1),
Point(169, 260, 1),
Point(148, 288, 1),
Point(152, 256, 1),
Point(164, 251, 1),
Point(169, 261, 1),
Point(147, 289, 1),
Point(152, 257, 1),
Point(164, 253, 1),
Point(168, 263, 1),
Point(147, 292, 1),
Point(152, 259, 1),
Point(164, 255, 1),
Point(168, 265, 1),
Point(147, 294, 1),
Point(152, 261, 1),
Point(164, 257, 1),
Point(167, 267, 1),
Point(147, 295, 1),
Point(153, 264, 1),
Point(164, 259, 1),
Point(167, 269, 1),
Point(147, 297, 1),
Point(153, 266, 1),
Point(164, 261, 1),
Point(167, 272, 1),
Point(147, 299, 1),
Point(154, 270, 1),
Point(164, 263, 1),
Point(167, 274, 1),
Point(147, 301, 1),
Point(155, 272, 1),
Point(163, 266, 1),
Point(166, 276, 1),
Point(148, 304, 1),
Point(155, 276, 1),
Point(162, 267, 1),
Point(165, 277, 1),
Point(148, 306, 1),
Point(154, 278, 1),
Point(161, 267, 1),
Point(163, 278, 1),
Point(148, 307, 1),
Point(154, 279, 1),
Point(160, 269, 1),
Point(163, 278, 1),
Point(148, 307, 1),
Point(154, 280, 1),
Point(159, 270, 1),
Point(162, 280, 1),
Point(148, 309, 1),
Point(154, 281, 1),
Point(159, 270, 1),
Point(161, 280, 1),
Point(148, 309, 1),
Point(154, 282, 1),
Point(158, 273, 1),
Point(160, 282, 1),
Point(147, 312, 1),
Point(153, 285, 1),
Point(156, 275, 1),
Point(158, 284, 1),
Point(147, 314, 1),
Point(153, 287, 1),
Point(156, 277, 1),
Point(158, 286, 1),
Point(147, 316, 1),
Point(153, 289, 1),
Point(155, 280, 1),
Point(157, 289, 1),
Point(147, 319, 1),
Point(152, 292, 1),
Point(154, 282, 1),
Point(156, 290, 1),
Point(147, 320, 1),
Point(152, 294, 1),
Point(153, 282, 1),
Point(155, 291, 1),
Point(147, 322, 1),
Point(151, 294, 1),
Point(151, 285, 1),
Point(153, 293, 1),
Point(146, 325, 1),
Point(149, 297, 1),
Point(149, 289, 1),
Point(151, 296, 1),
Point(145, 328, 1),
Point(148, 302, 1),
Point(148, 290, 1),
Point(150, 297, 1),
Point(145, 328, 1),
Point(148, 303, 1),
Point(147, 294, 1),
Point(149, 300, 1),
Point(144, 331, 1),
Point(147, 307, 1),
Point(146, 295, 1),
Point(148, 300, 1),
Point(143, 332, 1),
Point(146, 308, 1),
Point(145, 297, 1),
Point(148, 302, 1),
Point(143, 335, 1),
Point(145, 310, 1),
Point(145, 298, 1),
Point(148, 303, 1),
Point(143, 337, 1),
Point(144, 311, 1),
Point(144, 299, 1),
Point(147, 304, 1),
Point(142, 337, 1),
Point(143, 312, 1),
Point(143, 300, 1),
Point(146, 305, 1),
Point(142, 337, 1),
Point(142, 313, 1),
Point(143, 300, 1),
Point(145, 304, 1),
Point(141, 336, 1),
Point(142, 312, 1),
Point(142, 300, 1),
Point(145, 304, 1),
Point(141, 336, 1),
Point(141, 313, 1),
Point(142, 300, 1),
Point(145, 304, 1),
Point(141, 336, 1),
Point(141, 313, 1),
Point(142, 300, 1),
Point(145, 304, 1),
Point(141, 337, 1),
Point(140, 313, 1),
Point(141, 300, 1),
Point(145, 304, 1),
Point(141, 337, 1),
Point(140, 313, 1),
])
Next = Template('Next' , [
Point(178, 175, 1),
Point(183, 189, 1),
Point(164, 214, 1),
Point(169, 181, 1),
Point(185, 166, 1),
Point(191, 180, 1),
Point(170, 205, 1),
Point(176, 172, 1),
Point(185, 164, 1),
Point(190, 179, 1),
Point(170, 204, 1),
Point(175, 171, 1),
Point(184, 165, 1),
Point(190, 180, 1),
Point(170, 203, 1),
Point(175, 170, 1),
Point(184, 164, 1),
Point(190, 179, 1),
Point(170, 202, 1),
Point(175, 169, 1),
Point(181, 166, 1),
Point(188, 181, 1),
Point(169, 204, 1),
Point(172, 171, 1),
Point(180, 166, 1),
Point(187, 181, 1),
Point(168, 204, 1),
Point(171, 171, 1),
Point(180, 166, 1),
Point(187, 182, 1),
Point(167, 205, 1),
Point(171, 171, 1),
Point(179, 166, 1),
Point(187, 181, 1),
Point(167, 206, 1),
Point(170, 171, 1),
Point(179, 167, 1),
Point(186, 181, 1),
Point(167, 206, 1),
Point(170, 171, 1),
Point(178, 166, 1),
Point(185, 180, 1),
Point(166, 204, 1),
Point(169, 169, 1),
Point(177, 164, 1),
Point(184, 179, 1),
Point(165, 203, 1),
Point(167, 169, 1),
Point(175, 164, 1),
Point(183, 179, 1),
Point(162, 202, 1),
Point(165, 169, 1),
Point(173, 165, 1),
Point(181, 179, 1),
Point(158, 203, 1),
Point(162, 169, 1),
Point(171, 165, 1),
Point(178, 179, 1),
Point(156, 204, 1),
Point(159, 169, 1),
Point(167, 165, 1),
Point(174, 179, 1),
Point(152, 204, 1),
Point(155, 170, 1),
Point(165, 165, 1),
Point(172, 180, 1),
Point(150, 205, 1),
Point(153, 170, 1),
Point(163, 165, 1),
Point(170, 180, 1),
Point(148, 205, 1),
Point(150, 169, 1),
Point(161, 164, 1),
Point(167, 180, 1),
Point(146, 205, 1),
Point(148, 169, 1),
Point(158, 164, 1),
Point(165, 180, 1),
Point(143, 205, 1),
Point(145, 169, 1),
Point(155, 162, 1),
Point(162, 178, 1),
Point(141, 204, 1),
Point(142, 169, 1),
Point(153, 161, 1),
Point(160, 178, 1),
Point(140, 204, 1),
Point(141, 168, 1),
Point(152, 160, 1),
Point(159, 176, 1),
Point(138, 202, 1),
Point(139, 167, 1),
Point(149, 159, 1),
Point(155, 175, 1),
Point(136, 201, 1),
Point(137, 167, 1),
Point(148, 159, 1),
Point(154, 175, 1),
Point(135, 201, 1),
Point(136, 166, 1),
Point(146, 159, 1),
Point(153, 175, 1),
Point(134, 201, 1),
Point(134, 167, 1),
Point(145, 158, 1),
Point(151, 174, 1),
Point(132, 200, 1),
Point(132, 166, 1),
Point(143, 157, 1),
Point(150, 172, 1),
Point(130, 200, 1),
Point(130, 166, 1),
Point(142, 157, 1),
Point(148, 172, 1),
Point(129, 200, 1),
Point(129, 165, 1),
Point(139, 157, 1),
Point(146, 172, 1),
Point(128, 200, 1),
Point(126, 166, 1),
Point(136, 157, 1),
Point(143, 172, 1),
Point(125, 200, 1),
Point(123, 166, 1),
Point(133, 157, 1),
Point(140, 172, 1),
Point(124, 200, 1),
Point(120, 166, 1),
Point(130, 157, 1),
Point(137, 172, 1),
Point(120, 200, 1),
Point(116, 166, 1),
Point(128, 157, 1),
Point(135, 172, 1),
Point(118, 200, 1),
Point(114, 166, 1),
Point(125, 157, 1),
Point(131, 172, 1),
Point(115, 200, 1),
Point(111, 166, 1),
Point(120, 158, 1),
Point(125, 173, 1),
Point(111, 202, 1),
Point(106, 166, 1),
Point(113, 159, 1),
Point(118, 173, 1),
Point(105, 204, 1),
Point(100, 167, 1),
Point(110, 160, 1),
Point(115, 174, 1),
Point(101, 205, 1),
Point(97, 169, 1),
Point(106, 160, 1),
Point(111, 173, 1),
Point(97, 205, 1),
Point(94, 169, 1),
Point(102, 161, 1),
Point(107, 174, 1),
Point(94, 207, 1),
Point(89, 170, 1),
Point(97, 161, 1),
Point(103, 174, 1),
Point(91, 207, 1),
Point(85, 170, 1),
Point(95, 163, 1),
Point(101, 175, 1),
Point(89, 208, 1),
Point(83, 171, 1),
Point(93, 164, 1),
Point(100, 177, 1),
Point(88, 210, 1),
Point(82, 173, 1),
Point(91, 164, 1),
Point(97, 176, 1),
Point(86, 209, 1),
Point(79, 173, 1),
Point(89, 165, 1),
Point(96, 177, 1),
Point(85, 211, 1),
Point(77, 174, 1),
Point(87, 165, 1),
Point(94, 177, 1),
Point(83, 211, 1),
Point(74, 174, 1),
Point(86, 165, 1),
Point(93, 177, 1),
Point(82, 211, 1),
Point(73, 174, 1),
Point(85, 166, 1),
Point(92, 178, 1),
Point(80, 211, 1),
Point(71, 174, 1),
Point(84, 167, 1),
Point(91, 179, 1),
Point(79, 214, 1),
Point(69, 176, 1),
Point(82, 168, 1),
Point(89, 179, 1),
Point(78, 214, 1),
Point(67, 176, 1),
Point(80, 168, 1),
Point(88, 180, 1),
Point(77, 215, 1),
Point(66, 177, 1),
Point(78, 168, 1),
Point(86, 180, 1),
Point(75, 215, 1),
Point(63, 177, 1),
Point(76, 168, 1),
Point(84, 180, 1),
Point(74, 215, 1),
Point(62, 177, 1),
Point(74, 168, 1),
Point(83, 180, 1),
Point(73, 215, 1),
Point(59, 176, 1),
Point(73, 168, 1),
Point(81, 180, 1),
Point(72, 216, 1),
Point(58, 177, 1),
Point(70, 168, 1),
Point(79, 179, 1),
Point(70, 216, 1),
Point(55, 177, 1),
Point(69, 167, 1),
Point(78, 179, 1),
Point(69, 216, 1),
Point(55, 176, 1),
Point(69, 167, 1),
Point(77, 179, 1),
Point(69, 216, 1),
Point(54, 176, 1),
Point(68, 166, 1),
Point(77, 178, 1),
Point(69, 215, 1),
Point(54, 176, 1),
Point(68, 166, 1),
Point(77, 178, 1),
Point(68, 215, 1),
Point(54, 176, 1),
])
pause = Template('pause' , [
Point(183, 148, 1),
Point(189, 161, 1),
Point(165, 185, 1),
Point(172, 149, 1),
Point(190, 142, 1),
Point(196, 156, 1),
Point(174, 178, 1),
Point(180, 143, 1),
Point(190, 140, 1),
Point(196, 154, 1),
Point(173, 177, 1),
Point(180, 141, 1),
Point(189, 140, 1),
Point(195, 154, 1),
Point(172, 177, 1),
Point(179, 141, 1),
Point(188, 139, 1),
Point(194, 153, 1),
Point(172, 176, 1),
Point(179, 140, 1),
Point(189, 139, 1),
Point(194, 152, 1),
Point(173, 175, 1),
Point(179, 140, 1),
Point(188, 139, 1),
Point(194, 153, 1),
Point(172, 175, 1),
Point(178, 140, 1),
Point(186, 139, 1),
Point(192, 153, 1),
Point(172, 176, 1),
Point(177, 141, 1),
Point(186, 139, 1),
Point(192, 153, 1),
Point(172, 176, 1),
Point(177, 141, 1),
Point(185, 139, 1),
Point(191, 153, 1),
Point(172, 175, 1),
Point(177, 140, 1),
Point(185, 139, 1),
Point(191, 153, 1),
Point(172, 175, 1),
Point(177, 140, 1),
Point(185, 139, 1),
Point(191, 153, 1),
Point(172, 175, 1),
Point(177, 140, 1),
Point(185, 139, 1),
Point(191, 153, 1),
Point(172, 175, 1),
Point(177, 140, 1),
Point(185, 138, 1),
Point(191, 152, 1),
Point(172, 175, 1),
Point(176, 139, 1),
Point(185, 138, 1),
Point(190, 152, 1),
Point(172, 175, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(172, 174, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(171, 174, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(171, 174, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(172, 174, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(172, 174, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(172, 174, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(171, 174, 1),
Point(176, 139, 1),
Point(184, 138, 1),
Point(190, 152, 1),
Point(171, 174, 1),
Point(176, 139, 1),
Point(183, 137, 1),
Point(189, 151, 1),
Point(171, 174, 1),
Point(175, 138, 1),
Point(183, 137, 1),
Point(189, 151, 1),
Point(171, 174, 1),
Point(175, 138, 1),
Point(183, 136, 1),
Point(188, 150, 1),
Point(171, 173, 1),
Point(175, 138, 1),
Point(182, 136, 1),
Point(188, 150, 1),
Point(171, 173, 1),
Point(175, 137, 1),
Point(182, 136, 1),
Point(188, 150, 1),
Point(171, 173, 1),
Point(175, 137, 1),
Point(181, 136, 1),
Point(187, 150, 1),
Point(171, 173, 1),
Point(175, 137, 1),
Point(180, 136, 1),
Point(186, 150, 1),
Point(171, 173, 1),
Point(174, 137, 1),
Point(180, 136, 1),
Point(186, 150, 1),
Point(171, 173, 1),
Point(174, 137, 1),
Point(180, 136, 1),
Point(186, 150, 1),
Point(171, 173, 1),
Point(173, 138, 1),
Point(179, 136, 1),
Point(185, 151, 1),
Point(170, 174, 1),
Point(173, 139, 1),
Point(179, 137, 1),
Point(185, 151, 1),
Point(170, 175, 1),
Point(173, 139, 1),
Point(179, 137, 1),
Point(185, 152, 1),
Point(170, 176, 1),
Point(172, 140, 1),
Point(178, 137, 1),
Point(185, 152, 1),
Point(170, 176, 1),
Point(172, 140, 1),
Point(178, 137, 1),
Point(185, 152, 1),
Point(169, 176, 1),
Point(172, 140, 1),
Point(178, 137, 1),
Point(184, 152, 1),
Point(169, 175, 1),
Point(171, 140, 1),
Point(178, 136, 1),
Point(184, 151, 1),
Point(169, 175, 1),
Point(171, 139, 1),
Point(177, 136, 1),
Point(184, 151, 1),
Point(169, 174, 1),
Point(171, 138, 1),
Point(177, 135, 1),
Point(184, 151, 1),
Point(169, 174, 1),
Point(171, 138, 1),
Point(177, 135, 1),
Point(184, 150, 1),
Point(169, 173, 1),
Point(171, 138, 1),
Point(177, 135, 1),
Point(184, 150, 1),
Point(169, 173, 1),
Point(171, 138, 1),
Point(177, 135, 1),
Point(183, 150, 1),
Point(169, 173, 1),
Point(171, 137, 1),
Point(177, 135, 1),
Point(183, 150, 1),
Point(169, 173, 1),
Point(170, 137, 1),
Point(176, 135, 1),
Point(183, 150, 1),
Point(169, 173, 1),
Point(170, 138, 1),
Point(176, 135, 1),
Point(182, 150, 1),
Point(169, 173, 1),
Point(170, 138, 1),
Point(176, 135, 1),
Point(182, 150, 1),
Point(168, 174, 1),
Point(169, 138, 1),
Point(176, 136, 1),
Point(182, 151, 1),
Point(168, 174, 1),
Point(169, 138, 1),
Point(176, 136, 1),
Point(182, 151, 1),
Point(168, 175, 1),
Point(169, 139, 1),
Point(176, 136, 1),
Point(182, 152, 1),
Point(168, 175, 1),
Point(169, 139, 1),
Point(176, 137, 1),
Point(182, 152, 1),
Point(168, 175, 1),
Point(169, 139, 1),
Point(176, 137, 1),
Point(182, 152, 1),
Point(168, 175, 1),
Point(169, 139, 1),
Point(176, 137, 1),
Point(182, 152, 1),
Point(168, 175, 1),
Point(169, 139, 1),
Point(176, 138, 1),
Point(182, 152, 1),
Point(168, 175, 1),
Point(169, 140, 1),
Point(176, 138, 1),
Point(182, 152, 1),
Point(168, 175, 1),
Point(169, 140, 1),
Point(176, 140, 1),
Point(182, 154, 1),
Point(168, 176, 1),
Point(169, 142, 1),
Point(176, 141, 1),
Point(182, 154, 1),
Point(168, 176, 1),
Point(169, 143, 1),
Point(176, 141, 1),
Point(182, 155, 1),
Point(167, 177, 1),
Point(169, 144, 1),
Point(176, 142, 1),
Point(182, 155, 1),
Point(167, 177, 1),
Point(169, 144, 1),
Point(175, 142, 1),
Point(182, 155, 1),
Point(167, 177, 1),
Point(168, 144, 1),
Point(175, 142, 1),
Point(182, 155, 1),
Point(167, 177, 1),
Point(168, 144, 1),
Point(175, 142, 1),
Point(182, 155, 1),
Point(167, 176, 1),
Point(168, 144, 1),
Point(175, 141, 1),
Point(181, 154, 1),
Point(167, 175, 1),
Point(168, 144, 1),
Point(175, 141, 1),
Point(181, 154, 1),
Point(167, 175, 1),
Point(168, 144, 1),
Point(175, 141, 1),
Point(181, 154, 1),
Point(166, 175, 1),
Point(168, 144, 1),
Point(174, 142, 1),
Point(180, 154, 1),
Point(165, 176, 1),
Point(167, 144, 1),
Point(174, 142, 1),
Point(180, 155, 1),
Point(165, 176, 1),
Point(167, 145, 1),
Point(174, 142, 1),
Point(180, 155, 1),
Point(164, 177, 1),
Point(167, 145, 1),
Point(174, 142, 1),
Point(180, 155, 1),
Point(164, 178, 1),
Point(166, 145, 1),
Point(174, 142, 1),
Point(180, 155, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(174, 142, 1),
Point(180, 155, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(174, 142, 1),
Point(180, 155, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(174, 142, 1),
Point(179, 155, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(173, 142, 1),
Point(179, 155, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(173, 142, 1),
Point(179, 154, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(173, 142, 1),
Point(179, 154, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(173, 142, 1),
Point(179, 154, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(173, 142, 1),
Point(179, 154, 1),
Point(163, 178, 1),
Point(166, 145, 1),
Point(173, 141, 1),
Point(179, 154, 1),
Point(163, 177, 1),
Point(166, 145, 1),
Point(173, 141, 1),
Point(179, 154, 1),
Point(163, 177, 1),
Point(166, 145, 1),
Point(173, 141, 1),
Point(179, 154, 1),
Point(163, 177, 1),
Point(166, 145, 1),
Point(173, 142, 1),
Point(179, 155, 1),
Point(163, 178, 1),
Point(166, 145, 1),
])
Prev = Template('Prev' , [
Point(184, 175, 1),
Point(192, 189, 1),
Point(174, 214, 1),
Point(175, 176, 1),
Point(188, 180, 1),
Point(197, 193, 1),
Point(178, 220, 1),
Point(179, 180, 1),
Point(190, 178, 1),
Point(199, 192, 1),
Point(180, 219, 1),
Point(180, 179, 1),
Point(192, 179, 1),
Point(201, 194, 1),
Point(182, 220, 1),
Point(182, 179, 1),
Point(193, 179, 1),
Point(202, 193, 1),
Point(184, 220, 1),
Point(184, 179, 1),
Point(196, 176, 1),
Point(204, 190, 1),
Point(188, 217, 1),
Point(187, 177, 1),
Point(198, 178, 1),
Point(206, 191, 1),
Point(190, 218, 1),
Point(190, 178, 1),
Point(201, 178, 1),
Point(208, 191, 1),
Point(191, 219, 1),
Point(193, 179, 1),
Point(203, 180, 1),
Point(209, 192, 1),
Point(192, 220, 1),
Point(196, 180, 1),
Point(206, 182, 1),
Point(211, 194, 1),
Point(194, 223, 1),
Point(199, 183, 1),
Point(208, 184, 1),
Point(212, 197, 1),
Point(195, 226, 1),
Point(202, 186, 1),
Point(211, 186, 1),
Point(214, 199, 1),
Point(198, 228, 1),
Point(207, 190, 1),
Point(215, 186, 1),
Point(217, 198, 1),
Point(204, 227, 1),
Point(213, 190, 1),
Point(219, 185, 1),
Point(220, 197, 1),
Point(207, 226, 1),
Point(218, 191, 1),
Point(223, 182, 1),
Point(223, 195, 1),
Point(213, 224, 1),
Point(223, 191, 1),
Point(227, 182, 1),
Point(227, 195, 1),
Point(217, 224, 1),
Point(227, 190, 1),
Point(231, 183, 1),
Point(230, 195, 1),
Point(221, 224, 1),
Point(231, 190, 1),
Point(237, 183, 1),
Point(236, 195, 1),
Point(226, 224, 1),
Point(236, 190, 1),
Point(241, 184, 1),
Point(239, 195, 1),
Point(229, 224, 1),
Point(241, 190, 1),
Point(247, 186, 1),
Point(245, 197, 1),
Point(235, 224, 1),
Point(247, 191, 1),
Point(253, 186, 1),
Point(250, 197, 1),
Point(241, 224, 1),
Point(253, 192, 1),
Point(254, 187, 1),
Point(251, 197, 1),
Point(244, 224, 1),
Point(254, 192, 1),
Point(261, 186, 1),
Point(257, 197, 1),
Point(250, 223, 1),
Point(261, 192, 1),
Point(269, 182, 1),
Point(265, 193, 1),
Point(256, 218, 1),
Point(269, 189, 1),
Point(274, 181, 1),
Point(269, 191, 1),
Point(258, 218, 1),
Point(274, 187, 1),
Point(276, 180, 1),
Point(271, 191, 1),
Point(259, 218, 1),
Point(276, 187, 1),
Point(280, 179, 1),
Point(275, 189, 1),
Point(265, 217, 1),
Point(282, 185, 1),
Point(284, 175, 1),
Point(280, 185, 1),
Point(272, 213, 1),
Point(286, 181, 1),
Point(285, 174, 1),
Point(281, 184, 1),
Point(272, 213, 1),
Point(287, 181, 1),
Point(286, 173, 1),
Point(281, 183, 1),
Point(272, 213, 1),
Point(288, 179, 1),
Point(286, 172, 1),
Point(282, 183, 1),
Point(274, 213, 1),
Point(289, 179, 1),
Point(286, 172, 1),
Point(282, 183, 1),
Point(275, 213, 1),
Point(289, 179, 1),
Point(290, 172, 1),
Point(284, 183, 1),
Point(277, 213, 1),
Point(293, 179, 1),
Point(294, 171, 1),
Point(287, 183, 1),
Point(280, 213, 1),
Point(297, 179, 1),
Point(297, 169, 1),
Point(291, 182, 1),
Point(283, 213, 1),
Point(301, 178, 1),
Point(301, 165, 1),
Point(295, 178, 1),
Point(287, 209, 1),
Point(306, 174, 1),
Point(302, 164, 1),
Point(296, 176, 1),
Point(289, 208, 1),
Point(307, 172, 1),
Point(302, 164, 1),
Point(296, 177, 1),
Point(290, 208, 1),
Point(307, 173, 1),
Point(303, 163, 1),
Point(297, 176, 1),
Point(291, 206, 1),
Point(308, 172, 1),
Point(303, 163, 1),
Point(297, 175, 1),
Point(291, 206, 1),
Point(308, 171, 1),
Point(304, 162, 1),
Point(298, 174, 1),
Point(293, 203, 1),
Point(309, 169, 1),
Point(305, 161, 1),
Point(299, 173, 1),
Point(294, 203, 1),
Point(310, 168, 1),
Point(305, 161, 1),
Point(299, 173, 1),
Point(294, 203, 1),
Point(310, 169, 1),
Point(306, 161, 1),
Point(300, 173, 1),
Point(295, 204, 1),
Point(311, 169, 1),
Point(306, 162, 1),
Point(300, 174, 1),
Point(295, 204, 1),
Point(311, 169, 1),
Point(306, 163, 1),
Point(301, 174, 1),
Point(296, 204, 1),
Point(311, 171, 1),
Point(307, 165, 1),
Point(301, 176, 1),
Point(297, 206, 1),
Point(312, 173, 1),
Point(308, 165, 1),
Point(303, 176, 1),
Point(298, 207, 1),
Point(313, 174, 1),
Point(309, 168, 1),
Point(303, 179, 1),
Point(299, 208, 1),
Point(314, 176, 1),
Point(310, 171, 1),
Point(304, 181, 1),
Point(299, 211, 1),
Point(314, 178, 1),
Point(312, 172, 1),
Point(305, 182, 1),
Point(301, 211, 1),
Point(316, 179, 1),
Point(314, 173, 1),
Point(307, 183, 1),
Point(302, 212, 1),
Point(317, 180, 1),
Point(315, 177, 1),
Point(308, 187, 1),
Point(302, 215, 1),
Point(318, 184, 1),
Point(317, 177, 1),
Point(310, 186, 1),
Point(304, 215, 1),
Point(321, 183, 1),
Point(318, 176, 1),
Point(311, 186, 1),
Point(305, 215, 1),
Point(321, 183, 1),
Point(319, 177, 1),
Point(312, 186, 1),
Point(306, 215, 1),
Point(323, 183, 1),
Point(319, 177, 1),
Point(313, 186, 1),
Point(307, 215, 1),
Point(323, 184, 1),
Point(321, 178, 1),
Point(314, 187, 1),
Point(308, 215, 1),
Point(325, 185, 1),
Point(323, 179, 1),
Point(316, 188, 1),
Point(310, 216, 1),
Point(327, 186, 1),
Point(325, 179, 1),
Point(319, 187, 1),
Point(312, 216, 1),
Point(329, 186, 1),
Point(327, 179, 1),
Point(321, 187, 1),
Point(314, 216, 1),
Point(331, 185, 1),
Point(328, 178, 1),
Point(322, 187, 1),
Point(315, 215, 1),
Point(333, 185, 1),
Point(328, 179, 1),
Point(322, 187, 1),
Point(315, 216, 1),
Point(333, 186, 1),
Point(328, 179, 1),
Point(322, 188, 1),
Point(315, 216, 1),
Point(332, 186, 1),
Point(328, 180, 1),
Point(322, 189, 1),
Point(315, 216, 1),
Point(332, 188, 1),
Point(328, 181, 1),
Point(322, 189, 1),
Point(315, 217, 1),
Point(332, 188, 1),
Point(327, 181, 1),
Point(322, 189, 1),
Point(315, 217, 1),
Point(332, 189, 1),
Point(328, 181, 1),
Point(322, 189, 1),
Point(315, 217, 1),
Point(332, 189, 1),
Point(328, 181, 1),
Point(322, 189, 1),
Point(315, 217, 1),
Point(333, 188, 1),
Point(328, 181, 1),
Point(322, 189, 1),
Point(315, 217, 1),
Point(332, 188, 1),
Point(327, 182, 1),
Point(322, 190, 1),
Point(315, 217, 1),
Point(332, 189, 1),
])
UP = Template('UP' , [
Point(189, 166, 1),
Point(196, 183, 1),
Point(172, 201, 1),
Point(179, 166, 1),
Point(181, 160, 1),
Point(188, 178, 1),
Point(163, 196, 1),
Point(170, 161, 1),
Point(179, 156, 1),
Point(186, 174, 1),
Point(162, 193, 1),
Point(170, 158, 1),
Point(179, 154, 1),
Point(185, 172, 1),
Point(161, 192, 1),
Point(170, 157, 1),
Point(180, 151, 1),
Point(186, 169, 1),
Point(163, 188, 1),
Point(171, 153, 1),
Point(180, 150, 1),
Point(186, 167, 1),
Point(163, 187, 1),
Point(171, 151, 1),
Point(181, 147, 1),
Point(186, 164, 1),
Point(164, 185, 1),
Point(172, 149, 1),
Point(182, 145, 1),
Point(188, 161, 1),
Point(165, 182, 1),
Point(174, 146, 1),
Point(183, 142, 1),
Point(189, 158, 1),
Point(166, 179, 1),
Point(175, 142, 1),
Point(184, 141, 1),
Point(189, 156, 1),
Point(166, 177, 1),
Point(176, 140, 1),
Point(184, 138, 1),
Point(189, 153, 1),
Point(166, 174, 1),
Point(176, 138, 1),
Point(183, 136, 1),
Point(188, 151, 1),
Point(165, 171, 1),
Point(175, 136, 1),
Point(182, 132, 1),
Point(187, 147, 1),
Point(165, 167, 1),
Point(174, 132, 1),
Point(182, 129, 1),
Point(187, 144, 1),
Point(166, 164, 1),
Point(175, 129, 1),
Point(182, 126, 1),
Point(187, 140, 1),
Point(166, 161, 1),
Point(175, 126, 1),
Point(182, 122, 1),
Point(187, 137, 1),
Point(166, 157, 1),
Point(175, 122, 1),
Point(181, 115, 1),
Point(186, 131, 1),
Point(166, 153, 1),
Point(174, 116, 1),
Point(181, 111, 1),
Point(185, 128, 1),
Point(166, 149, 1),
Point(174, 112, 1),
Point(181, 107, 1),
Point(184, 124, 1),
Point(166, 146, 1),
Point(173, 109, 1),
Point(180, 102, 1),
Point(183, 120, 1),
Point(165, 143, 1),
Point(173, 104, 1),
Point(179, 97, 1),
Point(183, 117, 1),
Point(165, 140, 1),
Point(173, 100, 1),
Point(179, 94, 1),
Point(182, 114, 1),
Point(165, 137, 1),
Point(173, 95, 1),
Point(179, 90, 1),
Point(182, 110, 1),
Point(165, 134, 1),
Point(172, 90, 1),
Point(179, 88, 1),
Point(181, 108, 1),
Point(164, 132, 1),
Point(172, 88, 1),
Point(178, 85, 1),
Point(181, 104, 1),
Point(163, 130, 1),
Point(172, 85, 1),
Point(178, 83, 1),
Point(180, 102, 1),
Point(162, 128, 1),
Point(171, 83, 1),
Point(177, 80, 1),
Point(180, 99, 1),
Point(162, 125, 1),
Point(171, 81, 1),
Point(177, 79, 1),
Point(180, 97, 1),
Point(161, 123, 1),
Point(171, 80, 1),
Point(177, 77, 1),
Point(179, 95, 1),
Point(161, 122, 1),
Point(171, 78, 1),
Point(177, 75, 1),
Point(179, 93, 1),
Point(161, 120, 1),
Point(171, 76, 1),
Point(177, 73, 1),
Point(179, 91, 1),
Point(160, 119, 1),
Point(171, 74, 1),
Point(177, 69, 1),
Point(179, 87, 1),
Point(160, 116, 1),
Point(171, 70, 1),
Point(177, 66, 1),
Point(179, 84, 1),
Point(160, 113, 1),
Point(170, 68, 1),
Point(177, 64, 1),
Point(179, 81, 1),
Point(161, 110, 1),
Point(170, 65, 1),
Point(177, 61, 1),
Point(179, 77, 1),
Point(161, 106, 1),
Point(170, 62, 1),
Point(177, 57, 1),
Point(179, 72, 1),
Point(161, 103, 1),
Point(170, 58, 1),
Point(177, 52, 1),
Point(179, 67, 1),
Point(161, 97, 1),
Point(170, 53, 1),
Point(177, 49, 1),
Point(180, 64, 1),
Point(161, 93, 1),
Point(170, 49, 1),
Point(177, 45, 1),
Point(180, 60, 1),
Point(162, 89, 1),
Point(170, 45, 1),
Point(177, 42, 1),
Point(180, 57, 1),
Point(162, 87, 1),
Point(169, 43, 1),
Point(177, 41, 1),
Point(180, 56, 1),
Point(162, 85, 1),
Point(169, 41, 1),
Point(177, 38, 1),
Point(180, 52, 1),
Point(162, 82, 1),
Point(169, 38, 1),
Point(177, 35, 1),
Point(180, 51, 1),
Point(162, 82, 1),
Point(168, 36, 1),
Point(177, 35, 1),
Point(180, 51, 1),
Point(161, 81, 1),
Point(168, 35, 1),
Point(177, 35, 1),
Point(180, 50, 1),
Point(161, 80, 1),
Point(167, 35, 1),
Point(177, 34, 1),
Point(180, 50, 1),
Point(161, 80, 1),
Point(167, 34, 1),
Point(177, 34, 1),
Point(180, 51, 1),
Point(161, 80, 1),
Point(167, 35, 1),
Point(177, 34, 1),
Point(179, 51, 1),
Point(160, 80, 1),
Point(167, 35, 1),
Point(176, 34, 1),
Point(179, 50, 1),
Point(160, 79, 1),
Point(166, 34, 1),
Point(175, 34, 1),
Point(178, 51, 1),
Point(159, 80, 1),
Point(165, 34, 1),
Point(175, 33, 1),
Point(178, 50, 1),
Point(159, 79, 1),
Point(165, 33, 1),
Point(174, 33, 1),
Point(177, 50, 1),
Point(158, 79, 1),
Point(164, 33, 1),
])
recognizer = Recognizer([Down,Next,pause,Prev,UP])
def connect_socket(res):
    mySocket = socket.socket()
    try:
        msg = ' '
        mySocket.bind(('localhost', 5001))
        mySocket.listen(5)
        print("Waiting for a device to connect...")
        conn, addr = mySocket.accept()
        print("Device connected")
        msg = res
        conn.send(bytes(msg, 'utf-8'))
    finally:
        conn.close()
        mySocket.close()
        print("Socket closed")

def HandG():
    cap = cv2.VideoCapture(0)
    framecnt = 0
    All_points = []
    mp_pose = mp.solutions.pose
    mp_drawing = mp.solutions.drawing_utils
    pose = mp_pose.Pose()

    while cap.isOpened():
        ret, frame = cap.read()
        if ret:
            frame = cv2.resize(frame, (480, 320))
            framecnt += 1

            try:
                RGB = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
                results = pose.process(RGB)

                if results.pose_landmarks:  # Check if landmarks are detected
                    h, w, _ = frame.shape
                    for i in [20, 22, 16, 18]:  
                        x = int(results.pose_landmarks.landmark[i].x * w)
                        y = int(results.pose_landmarks.landmark[i].y * h)
                        All_points.append(Point(x, y, 1))

                    if framecnt % 64 == 0:
                        framecnt = 0
                        result = recognizer.recognize(All_points)
                        print(result)  
                        threading.Thread(target=connect_socket, args=(result,)).start() 
                        return result
                        All_points = All_points[-int(len(All_points) * 0.2):]

                mp_drawing.draw_landmarks(frame, results.pose_landmarks, mp_pose.POSE_CONNECTIONS)
                cv2.imshow('Output', frame)
            except Exception as e:
                print(f"Error occurred: {e}")
                break

            if cv2.waitKey(1) & 0xFF == ord('q'):
                break

    cap.release()
    cv2.destroyAllWindows()
    pose.close()

def main():
    res = HandG()
    connect_socket(res)

main()


